# 과제 이것이 리눅스다 07. 셸스크립트

# 07. 셸 스크립트 프로그래밍

> 리눅스의 쉘: 명령어와 프로그램을 실행할 때 사용하는 인터페이스
> 

## 7.1 셸의 기본

셸은 사용자가 입력한 명령을 해석해 커널에게 전달하거나, 커널의 처리 결과를 사용자에게 전달하는 역할을 한다.

### 7.1.1 CentOS의 bash 셸

- CentOS에서 기본적으로 사용하는 셸은 bash
- Boume Shell을 기반으로 Korn Shell과 C Shell의 좋은 점을 합한 것
- bash의 특징
    - Alias 기능 (명령어 단축)
    - History 기능
    - 연산 기능
    - Job control 기능
    - 자동 이름 완성 기능
    - 프롬프트 제어 기능
    - 명령 편집 기능

### 7.1.2 셸의 명령문 처리 방법

- 셸 명령문은 명령문과 함께 여러가지 옵션이나 인자를 사용할 수 있음
- 형식 : (프롬프트) 명령어 [옵션 …][인자…]
- 다음과 같이 다양한 옵션과 인자를 사용해서 명령어를 사용

<img src="https://file.notion.so/f/s/ac64b763-4f34-48db-a287-95b8fbdd6573/Untitled.png?id=379a3904-022b-47cd-894f-0cd7ac26750f&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097138379&signature=nYT6jGdbIkBjXADp5NX5FOMVNtknEesoMvxMOUsbiCg&downloadName=Untitled.png">

### 7.1.3 환경 변수

- 주요 환경 변수 값
- 설정된 환경 변수는 echo $환경 변수 이름 형식

<img src ="https://file.notion.so/f/s/ac14bb71-d1b0-4de5-b013-6d73e5305ee3/Untitled.png?id=0cf27789-0ce3-4954-9300-e361c91b82bb&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097049691&signature=HjvilGZlPJFr4U0TM5goL_Adfy1Td_NaoIiTh4OZqgU&downloadName=Untitled.png">

- 환경 변수 값을 변경하려면 export 환경변수 = 값 형식을 실행
- printenv 명령어를 실행하면 출력 (그 외 환경 변수)

## 7.2 셸 스크립트 프로그래밍 실습

- 리눅스의 셸 스크립트는 C 언어와 유사한 방법으로 프로그래밍 할 수 있음
- 변수, 반복문, 제어문 등을 사용할 수 있음
- 리눅스의 많은 부분이 셸 스크립트로 작성

### 7.2.1 셸 스크립트 작성과 실행

<img src="https://file.notion.so/f/s/b33c04ff-1776-4f91-b9f5-4ed881e4f2f7/Untitled.png?id=fabbe044-5f1c-418d-bac0-9689b806a639&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097074471&signature=E7Fi3vOcfjYj0QeJfn1pTHx8oPKsZdK8sJCeX0LU5Kk&downloadName=Untitled.png">

<img src="https://file.notion.so/f/s/7a1f5f25-c19a-430a-b592-4af0f18b6188/Untitled.png?id=d4bdfa3c-a1e0-46d4-aa91-75829ef50b7f&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097104293&signature=_NkKzMNtSr_J4biqu1XiZ1js1QdqcrDEtDtoC_BAHNU&downloadName=Untitled.png">

- 실행 방법
    - sh 스크립트 파일
    - 실행가능 속성으로 변경한 후 실행

### 7.2.2 변수

- 필요한 값을 계속 변경해 저장
- 변수에 필요한 값을 바꿔가는 방법으로 프로그래밍해 다양한 상황에 대처

**변수의 기본**

- 셸 스크립트에서는 변수를 사용하기 전에 미리 선언 X, 처음 변수에 값이 할당되면 자동으로 변수 생성
- 변수의 모든 값은 문자열, 숫자를 넣어도 문자
- 변수 이름은 대소문자를 구분
- 변수를 대입할 때 =좌우에는 공복이 없어야 함

**변수의 입력과 출력**

- $자가 들어간 문자를 출력하려면 ‘’로 묶어주거나 앞에 ‘\’를 붙여야 함
- “”로 변수를 묶어도 되고, 묶지 않아도 됨

**숫자 계산**

- 변수의 모든 값은 문자열로 취급
- 변수의 값을 연산시키려면 expr 키워드를 사용
- 수식과 함께 꼭 `로 묶어야 함
- 수식에 괄호를 사용하려면 \를 붙여야 함
- +,-,/와 달리 *기호도 \를 붙여야 함

**파라미터 변수**

- 파라미터 변수는 $0,$1,$2의 형태를 갖는다

### 7.2.3 if문과 case 문

- 기본 문법
<img src="https://file.notion.so/f/s/b51a5725-c90d-40f3-88ee-f92155a9d41f/Untitled.png?id=2bf4c1f0-c05c-4fa4-a867-08193fd270fe&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097153249&signature=v37yr-ulE_MbubDJTmq1I0-YpQt719jOLkMTKB0-kXU&downloadName=Untitled.png">

- [ 조건 ] 각 사이의 단어에는 모두 공백이 있어야 함

**if~else문**

<img src="https://file.notion.so/f/s/d0704710-a57f-4f19-bd52-fd29e5f671c2/Untitled.png?id=24a9281e-0fba-4cb2-bc21-32bc240c835b&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097164981&signature=OXP4ZmEBW19n5knisYA2VhecCgt5ivToplbjIf75Qmo&downloadName=Untitled.png">

**조건문에 들어가는 비교 연산자**

<img src="https://file.notion.so/f/s/bc540772-ee36-4779-b52a-42a6b9cdf9c5/Untitled.png?id=6a22cf11-06a2-4a39-8e33-fff8a71af3cf&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097175879&signature=B-u2NKMy8j0l4d8vB6ebBhTtrVXA3gL5TbmBFUAYFO0&downloadName=Untitled.png">

**산술 비교 연산자**

<img src="https://file.notion.so/f/s/ca7a16df-abd3-4755-a6bc-881973270e9b/Untitled.png?id=3de670d2-a899-444e-8fc7-f0956c361d03&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097188500&signature=iRjPIovFXddfLD1pzLvaTakvmtCpAIN4PvfcFA9xeek&downloadName=Untitled.png">

**파일과 관련된 조건**

<img src="https://file.notion.so/f/s/a9d2834a-8bda-46ee-a5b0-4ba21864eb31/Untitled.png?id=b2a00151-f177-45c3-a6c6-7ba8575a8620&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097200507&signature=eR1u71jzdgKSoc4K6zYrQiV-wTINM1qAEI9hCsv30qk&downloadName=Untitled.png">

**case~esac 문**

- if문은 참과 거짓이라는 두 가지 경우만 사용할 수 있음
- 여러가지 경우의 수가 있다면 if문을 중복해서 사용해야 하므로 구문이 복잡해짐
- 이때 사용하는 것이 case문
- 다중분기라 함
<img src="https://file.notion.so/f/s/606d40ea-b27b-43dd-a9a4-6165804c4664/Untitled.png?id=43653c0a-b503-44d5-b03a-b63b895115f8&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097222204&signature=SB6U3mOPoGM_xr_BhNfOMCIfN_Eae0jlWdjGR-RmLjI&downloadName=Untitled.png">

AND OR 관계 연산자

- 조건문에서는 and와 or 의미를 갖는 관계 연산자 사용
- and -a 또는 && 사용
- or은 -o 또는 ||사용
- 테스트 문 안에서 -a, -o를 사용할 수 있음, 이때 \를 붙여야 함

### 7.2.4 반복문

**for ~ in문**

- 변수에 각각 값을 넣은 후 do 안에 있는 반복할 문장을 실행
- 값의 개수만큼 반복 실행

<img src="https://file.notion.so/f/s/bcfc0abb-55ba-40ad-b7a2-8ae8075fb81a/Untitled.png?id=7ede7069-d41d-4409-890b-6db338f6bea8&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097234177&signature=U2K2ANY4H9Qe62oKe-zwH32Gu4Hp23l7mzcDx1NH-K0&downloadName=Untitled.png">

**while문**

- 조건식이 참인 동안에 계속 반복하는 특성을 갖음

**until문**

- while문과 용도가 거의 같지만 until문은 조건식이 참일 때까지 계속 반복

**break, continue, exit, return**

- break : 반복문 종료
- continue: 반복문 조건식
- exit: 해당 프로그램 종료
- return 함수 안에서 사용, 함수를 호출한 곳으로 돌아가게 함

### 7.2.4기타 알아둘 내용

**사용자 정의 함수**

- 사용자가 직접 함수를 작성하고 호출할 수 있음

<img src="https://file.notion.so/f/s/d5f0ecc3-ed7d-4b56-9d89-5010a579206a/Untitled.png?id=5141bff5-d7cd-40f0-8bdd-96f1a3a95075&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097247457&signature=VJrDotPUylfpvb6L1v6ndg_RB6GT5LF6rDMpt0TJpZM&downloadName=Untitled.png">

**함수의 파라미터 사용**

- 인자를 사용하려면 함수를 호출할 때 파라미터를 붙여서 호출
- 함수 안에서는 $1, $2로 사용

<img src="https://file.notion.so/f/s/9b4378e4-c1fe-4531-b557-5ea93c5b1e2c/Untitled.png?id=a27c2ff4-9a73-4fde-b8dd-74a071e86247&table=block&spaceId=f7f5a27f-fb49-4dd8-8a47-1d1cb5901c61&expirationTimestamp=1683097262682&signature=tevsZKa7r3K4EkbShKjq7HGC8OH-6P2SXbG6LWDhIKo&downloadName=Untitled.png">

**eval**

- 문자열을 명령문으로 인식, 실행

**export**

- 외부 변수로 선언

**printf**

- c 언어의 printf()함수와 비슷하게 형식을 지정해서 출력

**set과 $(명령어)**

- 리눅스의 명령어를 결과로 사용하려면 $(명령어)형식을 사용
- 결과를 파라미터로 사용하고자 할 때는 set 명령어와 함께 사용

**shift**

- 파라미터 변수를 왼 쪽으로 한 단계씩 아래로 쉬프트
- 모든 파라미터 변수를 출력하고 싶거나, 10개가 넘는 파라미터 변수에 접근할 때 사용# 과제 이것이 리눅스다 